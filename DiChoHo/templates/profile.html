{% extends 'base.html' %}
{% load static %}
{% block title %}Profile{% endblock %}

{% block menu_home_class %}active{% endblock %}
{% block page_css %}
<link rel="stylesheet" href="{% static './css/profile.css' %}" />
{% endblock %}
{% block content %}

<div class="row gutters-sm mt-5">
  <div class="col-md-4 d-none d-md-block">
    <div class="card">
      <div class="card-body">
        <nav class="nav flex-column nav-pills nav-gap-y-1">
          <a href="#profile" data-toggle="tab" class="nav-item nav-link has-icon nav-link-faded active">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
              class="feather feather-user mr-2">
              <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
              <circle cx="12" cy="7" r="4"></circle>
            </svg>Hồ sơ người dùng
          </a>
          <a href="#security" data-toggle="tab" class="nav-item nav-link has-icon nav-link-faded">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
              class="feather feather-shield mr-2">
              <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
            </svg>Cài đặt bảo mật
          </a>
          <a href="#information_order" data-toggle="tab" class="nav-item nav-link has-icon nav-link-faded">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
              class="feather feather-credit-card mr-2">
              <rect x="1" y="4" width="22" height="16" rx="2" ry="2"></rect>
              <line x1="1" y1="10" x2="23" y2="10"></line>
            </svg>Lịch sử mua hàng
          </a>
        </nav>
      </div>
    </div>
  </div>
  <div class="col-md-8">
    <div class="card">
      <div class="card-header border-bottom mb-3 d-flex d-md-none">
        <ul class="nav nav-tabs card-header-tabs nav-gap-x-1" role="tablist">
          <li class="nav-item">
            <a href="#profile" data-toggle="tab" class="nav-link has-icon active"><svg
                xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                class="feather feather-user">
                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                <circle cx="12" cy="7" r="4"></circle>
              </svg></a>
          </li>
          <li class="nav-item">
            <a href="#security" data-toggle="tab" class="nav-link has-icon"><svg xmlns="http://www.w3.org/2000/svg"
                width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                stroke-linecap="round" stroke-linejoin="round" class="feather feather-shield">
                <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
              </svg></a>
          </li>
          <li class="nav-item">
            <a href="#information_order" data-toggle="tab" class="nav-link has-icon"><svg
                xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                class="feather feather-credit-card">
                <rect x="1" y="4" width="22" height="16" rx="2" ry="2"></rect>
                <line x1="1" y1="10" x2="23" y2="10"></line>
              </svg></a>
          </li>
        </ul>
      </div>
      <div class="card-body tab-content">
        <div class="tab-pane active" id="profile">
          <div class="form-group" style="font-size:25px">Thông tin người dùng </div>
          <hr>
          <div class="info">
            <div class="info-left" style="float: left;width: 60%;">
              <div class="info-title">Thông tin cá nhân</div>
              <div class="informational">
                <div class="form-name" style="display:flex;padding-top:30px">
                  <div class="input-label">Họ & tên</div>
                  <div class=" " style="z-index:1 ;flex : 1 1 0%; padding-left:80px;box-sizing: border-box;">
                    <p>{{user.first_name}}</p>
                  </div>
                </div>

                <div class="form-email" style="display:flex;padding-top:30px">
                  <div class="input-label">Email</div>
                  <div class=" " style="z-index:1 ;flex : 1 1 0%; padding-left:102px;box-sizing: border-box;">
                    <p>{{user.email}}</p>
                  </div>
                </div>

                <div class="form-location" style="display:flex;padding-top:30px">
                  <div class="input-label">Địa chỉ</div>
                  <div class=" " style="z-index:1 ;flex : 1 1 0%; padding-left:92px;box-sizing: border-box;">
                    <p>{{user_address.adress_line}}</p>
                  </div>
                </div>

                <div class="form-phone" style="display:flex;padding-top:30px">
                  <div class="input-label">Số điện thoại</div>
                  <div class=" " style="z-index:1 ;flex : 1 1 0%; padding-left:50px;box-sizing: border-box;">
                    <p>{{user_address.phone}}</p>
                  </div>
                </div>

                <!-- <div class="form-birth" style="display:flex;padding-top:30px">
                        <div class="input-label">Ngày sinh</div>
                        <div class= " " style="z-index:1 ;flex : 1 1 0%; padding-left:68px;box-sizing: border-box;">
                          <div class="select_div" style="padding-right: 60px;">
                            <select name="day" style="padding: 3px 30px 5px 1px;">
                              <option value="0">Ngày</option>
                              <option value="1">1</option>
                              <option value="2">2</option>
                              <option value="3">3</option>
                              <option value="4">4</option>
                              <option value="5">5</option>
                              <option value="6">6</option>
                              <option value="7">7</option>
                              <option value="8">8</option>
                              <option value="9">9</option>
                              <option value="10">10</option>
                              <option value="11">11</option>
                              <option value="12">12</option>
                              <option value="13">13</option>
                              <option value="14">14</option>
                              <option value="15">15</option>
                              <option value="16">16</option>
                              <option value="17">17</option>
                              <option value="18">18</option>
                              <option value="19">19</option>
                              <option value="20">20</option>
                              <option value="21">21</option>
                              <option value="22">22</option>
                              <option value="23">23</option>
                              <option value="24">24</option>
                              <option value="25">25</option>
                              <option value="26">26</option>
                              <option value="27">27</option>
                              <option value="28">28</option>
                              <option value="29">29</option>
                              <option value="30">30</option>
                              <option value="31">31</option>
                            </select>

                            <select class="month" style="padding: 3px 30px 5px 1px;">
                                <option value="0">Tháng</option>
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5</option>
                                <option value="6">6</option>
                                <option value="7">7</option>
                                <option value="8">8</option>
                                <option value="9">9</option>
                                <option value="10">10</option>
                                <option value="11">11</option>
                                <option value="12">12</option>
                            </select>

                            <select class="year" style="padding:3px 30px 5px 1px;">
                                <option value="0">Năm</option>
                                <option value="2021">2021</option><option value="2020">2020</option><option value="2019">2019</option><option value="2018">2018</option><option value="2017">2017</option><option value="2016">2016</option><option value="2015">2015</option><option value="2014">2014</option><option value="2013">2013</option><option value="2012">2012</option><option value="2011">2011</option><option value="2010">2010</option><option value="2009">2009</option><option value="2008">2008</option><option value="2007">2007</option><option value="2006">2006</option><option value="2005">2005</option><option value="2004">2004</option><option value="2003">2003</option><option value="2002">2002</option><option value="2001">2001</option><option value="2000">2000</option><option value="1999">1999</option><option value="1998">1998</option><option value="1997">1997</option><option value="1996">1996</option><option value="1995">1995</option><option value="1994">1994</option><option value="1993">1993</option><option value="1992">1992</option><option value="1991">1991</option><option value="1990">1990</option><option value="1989">1989</option><option value="1988">1988</option><option value="1987">1987</option><option value="1986">1986</option><option value="1985">1985</option><option value="1984">1984</option><option value="1983">1983</option><option value="1982">1982</option><option value="1981">1981</option><option value="1980">1980</option><option value="1979">1979</option><option value="1978">1978</option><option value="1977">1977</option><option value="1976">1976</option><option value="1975">1975</option><option value="1974">1974</option><option value="1973">1973</option><option value="1972">1972</option><option value="1971">1971</option><option value="1970">1970</option><option value="1969">1969</option><option value="1968">1968</option><option value="1967">1967</option><option value="1966">1966</option><option value="1965">1965</option><option value="1964">1964</option><option value="1963">1963</option><option value="1962">1962</option><option value="1961">1961</option><option value="1960">1960</option><option value="1959">1959</option><option value="1958">1958</option><option value="1957">1957</option><option value="1956">1956</option><option value="1955">1955</option><option value="1954">1954</option><option value="1953">1953</option><option value="1952">1952</option><option value="1951">1951</option><option value="1950">1950</option><option value="1949">1949</option><option value="1948">1948</option><option value="1947">1947</option><option value="1946">1946</option><option value="1945">1945</option><option value="1944">1944</option><option value="1943">1943</option><option value="1942">1942</option><option value="1941">1941</option><option value="1940">1940</option><option value="1939">1939</option><option value="1938">1938</option><option value="1937">1937</option><option value="1936">1936</option><option value="1935">1935</option><option value="1934">1934</option><option value="1933">1933</option><option value="1932">1932</option><option value="1931">1931</option><option value="1930">1930</option><option value="1929">1929</option><option value="1928">1928</option><option value="1927">1927</option><option value="1926">1926</option><option value="1925">1925</option><option value="1924">1924</option><option value="1923">1923</option><option value="1922">1922</option><option value="1921">1921</option><option value="1920">1920</option><option value="1919">1919</option><option value="1918">1918</option><option value="1917">1917</option><option value="1916">1916</option><option value="1915">1915</option><option value="1914">1914</option><option value="1913">1913</option><option value="1912">1912</option><option value="1911">1911</option><option value="1910">1910</option><option value="1909">1909</option><option value="1908">1908</option><option value="1907">1907</option><option value="1906">1906</option><option value="1905">1905</option><option value="1904">1904</option><option value="1903">1903</option><option value="1902">1902</option><option value="1901">1901</option><option value="1900">1900</option>
                            </select>
                          </div> 
                        </div>
                      </div> -->

                <!-- <div class="form-sex" style="display:flex;padding-top:30px">
                        <div class="input-label">Giới tính</div>
                        <div class= " " style="z-index:1 ;flex : 1 1 0%; padding-left:80px;box-sizing: border-box;">
                          <input class="input" type ="radio" style="height: 15px;width: 15px;" name="gender" value="male">
                          <span class="" style="padding-right: 30px;font-size:20px">Nam</span> 

                          <input class="input" type ="radio" style="height: 15px;width: 15px;" name="gender" value="female">
                          <span class="" style="padding-right: 30px;font-size:20px">Nữ</span> 
                          
                          <input class="input" type ="radio" style="height: 15px;width: 15px;" name="gender" value="different">
                          <span class="" style="padding-right: 30px;font-size:20px">Khác</span>  
                        </div>
                      </div> -->

                <div class="form-phone" style="display:flex;padding-top:30px">
                  <div class=" "
                    style="z-index:1 ;flex : 1 1 0%;position : relative;padding-left: 180px;box-sizing: border-box;">
                    <button type="submit" class="btn-solve"
                      style="color:white;background-color:#02BE6E;padding: 10px 40px 7px 40px;box-sizing: border-box;">Lưu
                      thông tin</button>
                  </div>
                </div>

              </div>
            </div>
            <div class="blockquote" style="border-left:1px solid rgb(235, 235, 240);margin:16px 0px;;"></div>
            <div class="info-right" style="float:right;width: 40%;">
              <div class="image_right">
                <div class="image_right_bottom">
                  <div class="choose_group">
                    <div class="choose_file" style="background-image: url();"></div>
                  </div><input class="image_file" type="file" accept=".jpg,.jpeg,.png"><button type="button"
                    class="btn btn-light btn--m btn--inline">Chọn ảnh</button>
                </div>
              </div>
            </div>
          </div>

        </div>



        <div class="tab-pane" id="security">
          <div class="form-group" style="font-size:25px">Đổi mật khẩu</div>
          <h6>Để bảo mật tài khoản vui lòng không chia sẻ mật khẩu cho người khác</h6>
          <hr>
          <div class="block_change_password" style="display:block;margin-top:0em;">

            <form method="post"
              style="padding:16px;border:1px solid rgb(235,235,240);box-sizing:border-box;border-radius:4px;display:block;width: 80%;float:left;">
              {% csrf_token %}
              {{ form }}
              {% comment %} <div class="form-password-current" style="font-size:20px;padding-top:10px;">Mật khẩu hiện tại</div>
              <div class="input-password-current"
                style="border:1px solid rgb(235,235,240);box-sizing:border-box;border-radius:4px">
                <input name="oldPassword" type="password" maxlength="50" placeholder="Nhập mật khẩu hiện tại" value=""
                  style="font-size:15px;padding-right:470px;margin:10px 4px" id="typepass">
                <input type="checkbox" onclick="Toggle()">
                <b style="right:0">Hiện</b>
              </div>

              <div class="form-password-new" style="font-size:20px;padding-top:20px">Mật khẩu mới</div>
              <div class="input-password-new"
                style="border:1px solid rgb(235,235,240);box-sizing:border-box;border-radius:4px">
                <input name="newPassword" type="password" maxlength="50" placeholder="Nhập mật khẩu mới" value=""
                  style="font-size:15px;padding-right:470px;margin:10px 4px" id="typepassnew">
                <input type="checkbox" onclick="Toggle1()">
                <b style="right:0">Hiện</b>
              </div>

              <div class="form-confirm-password" style="font-size:20px;padding-top:20px">Nhập lại mật khẩu mới</div>
              <div class="input-confirm-password"
                style="border:1px solid rgb(235,235,240);box-sizing:border-box;border-radius:4px">
                <input name="retypePassword" type="password" maxlength="50" placeholder="Nhập lại mật khẩu mới" value=""
                  style="font-size:15px;padding-right:470px;margin:10px 4px" id="typepassconfirmnew">
                <input type="checkbox" onclick="Toggle2()">
                <b style="right:0">Hiện</b>
              </div> {% endcomment %}
              <div class="btn_finish" style="padding-top:20px;">
                <button type="submit" class="btn-solve"
                  style="color:white;background-color:#02BE6E;box-sizing: border-box;width:280px;padding:8px 2px 8px;font-size:20px">Lưu</button>
              </div>

            </form>

          </div>
        </div>
        <div class="tab-pane" id="information_order">
          <div class="form-group" style="font-size:25px">Thông tin đơn hàng</div>
          <hr>
          <div class="container">
            {% for order in orders %}
            <div class="row g-3">
              <div class="col-12 bg-light p-3 d-flex justify-content-between">
                <div class="d-flex d-flex-inline">
                  <div class="pe-3">{{ order.created }}</div>
                  <div class="dropdown">
                    <a class="text-reset text-decoration-none dropdown-toggle" href="#" role="link" id="dropdownLink"
                      data-bs-toggle="dropdown" aria-expanded="false">
                      Dispacted to
                      <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" fill="currentColor"
                        class="bi bi-chevron-down" viewBox="0 0 16 16">
                        <path fill-rule="evenodd"
                          d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z" />
                      </svg>
                    </a>
                    <ul class="dropdown-menu" aria-labelledby="dropdownLink">
                      <li class="item small">{{order.full_name}}</li>
                      <li class="item small">{{order.address1}}</li>
                      <li class="item small">{{order.address2}}</li>
                      <li class="item small">{{order.post_code}}</li>
                    </ul>
                  </div>
                </div>
                <div class="text-end">
                  Total paid: <span class="fw-bold">£{{ order.total_paid }}</span>
                </div>
              </div>
              <div class="col-md-5 col-lg-4 order-md-last p-0 order-3">
                <div class="d-grid gap-2 ">
                  <button class="btn btn-warning" type="button">Problem with order</button>
                  <button class="btn btn-light" type="button">Leave a review</button>
                </div>
              </div>
              <div class="col-md-7 col-lg-8 p-0">
                {% for item in order.items.all %}
                <div class="card mb-3 border-0">
                  <div class="row g-0">
                    <div class="col-md-2 d-none d-md-block">
                      {% for image in item.product.image.all %}
                      {% if image.is_feature %}
                      <img class="img-fluid" src="{{ product.image.url | slice:"10:" }}" alt="..." ">
                      {% endif %}
                      {% endfor %}
                    </div>
                    <div class=" col-md-10">
                      <div class="card-body p-3">
                        <a class="text-decoration-none" href="{{ item.product.get_absolute_url }}">
                          <p class="card-text small">{{item.product.title}}</p>
                        </a>
                      </div>
                    </div>
                  </div>
                </div>
                {% endfor %}
              </div>
            </div>
            {% endfor %}
          </div>
          <hr>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  // Change the type of input to password or text
  function Toggle() {
    var temp = document.getElementById("typepass");
    if (temp.type === "password") {
      temp.type = "text";
    } else {
      temp.type = "password";
    }
  }

  function Toggle1() {
    var temp = document.getElementById("typepassnew");
    if (temp.type === "password") {
      temp.type = "text";
    } else {
      temp.type = "password";
    }
  }

  function Toggle2() {
    var temp = document.getElementById("typepassconfirmnew");
    if (temp.type === "password") {
      temp.type = "text";
    } else {
      temp.type = "password";
    }
  }
</script>
<br><br><br>
{% endblock %}